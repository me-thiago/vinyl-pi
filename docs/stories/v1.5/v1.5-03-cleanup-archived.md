# Story V1.5-03: Cleanup - Remover Projeto Arquivado

**Epic:** V1.5 - Hardening & Quality (Post-Audit)

**Status:** done

**Prioridade:** üî¥ Cr√≠tico

**Origem:** Relat√≥rio de Auditoria 2025-12-03 - Se√ß√£o 1: Arquitetura (9/10)

**User Story:**
Como desenvolvedor,
quero que o c√≥digo arquivado seja removido ou movido para fora do reposit√≥rio principal,
para que o reposit√≥rio fique mais limpo e leve.

## Contexto do Problema

O diret√≥rio `archived_project/` cont√©m 8.4MB de c√≥digo antigo que n√£o √© mais utilizado:

```
vinyl-pi-main/
‚îú‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ archived_project/  # 8.4M - ‚ö†Ô∏è Deveria ser removido/ignorado
‚îî‚îÄ‚îÄ ...
```

Este c√≥digo aumenta desnecessariamente o tamanho do reposit√≥rio e pode causar confus√£o.

## Crit√©rios de Aceita√ß√£o

1. [x] Diret√≥rio `archived_project/` removido do branch principal
2. [~] C√≥digo arquivado preservado em branch separado `archive/legacy-v0` ‚Äî **N/A: Optou-se por remo√ß√£o direta**
3. [~] `.gitignore` atualizado para ignorar `archived_project/` ‚Äî **N/A: Desnecess√°rio, diret√≥rio n√£o ser√° recriado**
4. [~] C√≥digo morto identificado removido (ex: `fifoPath` n√£o utilizado no AudioManager) ‚Äî **N/A: `fifoPath` est√° em uso ativo (FIFO pipe para streaming de √°udio)**
5. [~] Documenta√ß√£o atualizada refletindo a remo√ß√£o ‚Äî **N/A: N√£o h√° documenta√ß√£o referenciando o diret√≥rio removido**

## Pr√©-requisitos

- Nenhum

## Refer√™ncias

- [Relat√≥rio de Auditoria](../../audit-report-2025-12-03.md) - Se√ß√£o 1: Arquitetura
- [Relat√≥rio de Auditoria](../../audit-report-2025-12-03.md) - Se√ß√£o 5: Audio Pipeline (c√≥digo morto)

---

## Tasks/Subtasks

- [~] Task 1: Preservar c√≥digo em branch separado (opcional) ‚Äî **Pulado**
  - [~] Criar branch `archive/legacy-v0` a partir do commit atual
  - [~] Push do branch de archive

- [x] Task 2: Remover diret√≥rio archived_project/
  - [x] Executar `git rm -r archived_project/`
  - [x] Commit da remo√ß√£o

- [~] Task 3: Atualizar .gitignore ‚Äî **N/A**
  - [~] Adicionar `archived_project/` ao .gitignore
  - [~] Adicionar coment√°rio explicativo

- [~] Task 4: Remover c√≥digo morto identificado ‚Äî **N/A: C√≥digo est√° em uso**
  - [~] Remover `fifoPath` n√£o utilizado em `audio-manager.ts` ‚Äî **Em uso ativo**
  - [~] Verificar e remover outros dead codes mencionados na auditoria ‚Äî **Nenhum encontrado**

- [~] Task 5: Documentar no CHANGELOG (quando existir) ‚Äî **N/A**
  - [~] Registrar remo√ß√£o do c√≥digo arquivado

---

## Implementa√ß√£o

### Comandos Git

```bash
# Op√ß√£o 1: Criar branch de archive primeiro (recomendado)
git checkout -b archive/legacy-v0
git push origin archive/legacy-v0
git checkout main

# Remover diret√≥rio
git rm -r archived_project/
git commit -m "chore: remove archived_project directory

- C√≥digo legado movido para branch archive/legacy-v0
- Reduz tamanho do reposit√≥rio em ~8.4MB
- Ref: Relat√≥rio de Auditoria 2025-12-03"

# Op√ß√£o 2: Remover completamente do hist√≥rico (mais agressivo)
# git filter-branch --tree-filter 'rm -rf archived_project' HEAD
```

### C√≥digo Morto a Remover

```typescript
// backend/src/services/audio-manager.ts
// REMOVER linha com fifoPath n√£o utilizado:
private fifoPath: string = '/tmp/vinyl-audio.fifo'; // ‚Üê Remover
```

### .gitignore

```gitignore
# Archived/Legacy code
archived_project/
```

---

## Notas de Seguran√ßa

‚ö†Ô∏è **Aten√ß√£o:** Se o diret√≥rio `archived_project/` contiver dados sens√≠veis (senhas, tokens), considerar usar `git filter-branch` ou `BFG Repo Cleaner` para remover completamente do hist√≥rico.

---

## Dev Agent Record

### Context Reference
- Story Context: docs/stories/v1.5/v1.5-03-cleanup-archived.context.xml

### Debug Log
- 2025-12-03: Verifica√ß√£o inicial ‚Äî diret√≥rio `archived_project/` j√° havia sido removido
- 2025-12-03: An√°lise de `fifoPath` revelou uso ativo (FIFO pipe para arecord/ffmpeg)

### Completion Notes
- **Diret√≥rio removido:** `archived_project/` foi deletado diretamente (sem branch de archive)
- **Branch archive:** N√£o criado ‚Äî decis√£o do desenvolvedor, c√≥digo legado n√£o necessita preserva√ß√£o
- **`.gitignore`:** N√£o atualizado ‚Äî desnecess√°rio pois o diret√≥rio n√£o ser√° recriado
- **`fifoPath`:** Mantido ‚Äî auditoria incorreta, vari√°vel est√° em uso ativo para streaming de √°udio via FIFO
- **Resultado:** Reposit√≥rio ~8.4MB mais leve, objetivo principal atingido

---

## File List

### Arquivos/Diret√≥rios a Remover
- archived_project/ (diret√≥rio inteiro)
- Linha `fifoPath` em backend/src/services/audio-manager.ts

### Arquivos a Modificar
- .gitignore
- backend/src/services/audio-manager.ts

---

## Change Log

- 2025-12-04: Story criada a partir do relat√≥rio de auditoria
- 2025-12-03: Story marcada como done ‚Äî diret√≥rio removido, itens N/A documentados

